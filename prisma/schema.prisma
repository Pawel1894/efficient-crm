generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL")
    relationMode = "prisma"
}

model UserControl {
    userId        String
    lastActiveOrg String

    @@unique([userId])
}

model Lead {
    id         String     @id @default(cuid())
    firstName  String
    lastName   String
    company    String?
    title      String?
    email      String
    phone      String?
    location   String?
    activities Activity[]
    deals      Deal[]
    owner      String?
    status     String     @db.Text
    comment    String?    @db.LongText
    createdAt  DateTime   @default(now())
    updatedAt  DateTime   @updatedAt
    createdBy  String
    updatedBy  String
    team       String
}

model Deal {
    id               String   @id @default(cuid())
    forecast         Float    @db.Float
    value            Float?   @db.Float
    owner            String
    stage            String   @db.Text
    comment          String?  @db.LongText
    closeProbability Float    @db.Float
    lead             Lead?    @relation(fields: [leadId], references: [id])
    createdBy        String
    updatedBy        String
    createdAt        DateTime @default(now())
    updatedAt        DateTime @updatedAt

    leadId String?

    @@index([leadId])
}

model Contact {
    id         String     @id @default(cuid())
    firstName  String
    lastName   String
    company    String?
    title      String?
    email      String
    phone      String?
    location   String?
    comment    String?
    owner      String?
    type       String
    activities Activity[]
    createdBy  String
    updatedBy  String
    createdAt  DateTime   @default(now())
    updatedAt  DateTime   @updatedAt
    team       String
}

model Activity {
    id          String   @id @default(cuid())
    owner       String
    date        DateTime
    status      String
    contact     Contact? @relation(fields: [contactId], references: [id])
    lead        Lead?    @relation(fields: [leadId], references: [id])
    description String?
    title       String
    location    String?

    leadId    String?
    contactId String?

    @@index([leadId])
    @@index([contactId])
}

model Dictionary {
    id    String @id @default(cuid())
    type  Type
    value String
    label String
    orgId String
}

enum Type {
    ACTIVITY_STATUS
    CONTACT_TYPE
    DEAL_STAGE
    LEAD_STATUS
}
